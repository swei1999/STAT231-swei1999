---
title: "Calendar Project"
author: "Sean Wei"
output: pdf_document
---

```{r setup, include=FALSE}
library(tidyverse)
library(lubridate)
library(ical)

knitr::opts_chunk$set(
  tidy=FALSE,
  size="small")
```

```{r}
#Import Calendar Data
path <- "/Users/seanwei/Desktop/STAT231-swei1999"
filename <- "seanlonewei@gmail.com.ics"

my_calendar <- ical_parse_df(file=paste0(path,"/",filename)) %>%
  mutate(start_datetime = with_tz(start, tzone = "America/New_York")
       , end_datetime = with_tz(end, tzone = "America/New_York")
       , length_sec = end_datetime - start_datetime
       , date = floor_date(start_datetime, unit = "day"))

#Filter for Necessary Features & Dates
my_calendar <- my_calendar %>%
  mutate(length_hour = round(length_sec * 0.000277778, digits = 2)) %>%
  filter(date > "2020-09-07") %>%
  select(-c(uid, description, last.modified, status, length_sec))

my_calendar %>%
  group_by(summary) %>%
  summarize(tot_hrs = sum(as.numeric(length_hour)))
```

